FROM tinkerpop/gremlin-server:3.5.4

# Remove the problematic docker-entrypoint.sh entirely
RUN rm -f /docker-entrypoint.sh

# Patch the gremlin-server.sh script to remove sed operations
RUN sed -i '/sed /d' /opt/gremlin-server/bin/gremlin-server.sh

# Copy our minimal entrypoint that just runs Java directly
COPY gremlin-entrypoint.sh /start.sh
RUN chmod +x /start.sh

ENTRYPOINT ["/start.sh"]
